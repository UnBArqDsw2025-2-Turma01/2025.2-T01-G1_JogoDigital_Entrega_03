# 3.1. Módulo Padrões de Projeto GoFs Criacionais

## 3.1.1. Introdução

Os **Padrões de Projeto Criacionais**, parte do catálogo da "Gang of Four" (GoF) <a href="#REF1">[1]</a>, representam soluções consagradas para problemas recorrentes relacionados à **criação de objetos** em _software_ orientado a objetos. Diferentemente dos padrões Estruturais e Comportamentais, que lidam com a composição de classes e a comunicação entre objetos, os padrões Criacionais focam em **como instanciar objetos de maneira flexível, independente e reutilizável**.

Esses padrões são essenciais para controlar a complexidade associada à criação de objetos, permitindo **encapsular a lógica de construção**, reduzir dependências diretas e tornar o código mais **adaptável a mudanças**. Eles oferecem formas padronizadas de criar instâncias sem acoplar o código a classes concretas, aumentando a **coesão, a reutilização e a testabilidade** do sistema.

## 3.1.2. Participantes

<font size="3"><p style="text-align: center">Tabela 1: Participantes</p></font>

<div align="center">
<table>
  <thead>
    <tr>
      <th>Nome</th>
      <th>Função</th>
      <th>Data</th>
      <th>Hora</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://github.com/caioduart3">Caio Duarte</a></td>
      <td>GoF Criacional - Singleton</td>
      <td>23/10/2025</td>
      <td>20:30</td>
    </tr>
    <tr>
      <td><a href="https://github.com/felixlaryssa">Laryssa Félix</a></td>
      <td>GoF Criacional - Singleton</td>
      <td>23/10/2025</td>
      <td>20:30</td>
    </tr>
    <tr>
      <td><a href="https://github.com/rafaelschadt">Rafael Schadt</a></td>
      <td>GoF Criacional - Singleton</td>
      <td>23/10/2025</td>
      <td>20:30</td>
    </tr>
    <tr>
      <td><a href="https://github.com/VictorPontual">Victor Pontual</a></td>
      <td>GoF Criacional - Singleton</td>
      <td>23/10/2025</td>
      <td>20:30</td>
    </tr>
  </tbody>
</table>
</div>

<font size="2"><p style="text-align: center">Fonte: Equipe do Projeto, 2025.</p></font>

## 3.1.3. Metodologia

A pesquisa e desenvolvimento do estudo dos Padrões de Projeto Criacionais foram conduzidos seguindo uma abordagem prática e colaborativa, com foco na **criação eficiente e flexível de objetos** dentro do sistema de _software_ do jogo.

### 3.1.3.1. Revisão e Seleção de Padrões

Foi realizada uma revisão do catálogo de Padrões de Projeto Criacionais da GoF, selecionando os padrões mais relevantes para **controlar a criação de instâncias de entidades do jogo**, garantindo que o código ficasse mais modular e fácil de estender.

### 3.1.3.2. Aplicação e Implementação

O padrão selecionado (_Singleton_) foi implementado no código-fonte do jogo. Essa etapa visou **reduzir acoplamento direto às classes concretas** e fornecer um mecanismo centralizado de gerenciamento de recursos.

### 3.1.3.3. Modelagem e Documentação UML

Para documentar visualmente a aplicação dos padrões, utilizou-se o **Draw.io** para criar **Diagramas de Classes**.

### 3.1.3.4. Demonstração e Colaboração

Sessões de desenvolvimento e explicação do código foram **registradas via Microsoft Teams**, documentando o processo de aplicação dos padrões e o fluxo colaborativo da equipe.

<div style="text-align: center;">
<iframe width="560" height="315" src="https://www.youtube.com/embed/RtJ-M3CTaQI?si=GBrL8RPyPvW3aRfs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>

<font size="2"><p style="text-align: center">Vídeo 1: Sessão de desenvolvimento e explicação do padrão Singleton.</p></font>

<font size="2"><p style="text-align: center">Fonte: Equipe do Projeto, 2025.</p></font>

## 3.1.4. Singleton

O padrão **Singleton** garante que uma classe tenha **uma única instância** e fornece um ponto global de acesso a ela. No projeto, foi usado para gerenciar recursos globais, como os assets do jogo, garantindo que sejam carregados uma única vez e compartilhados por todo o sistema.

### 3.1.4.1. Diagrama UML

O Singleton foi aplicado no gerenciamento de instâncias dos Assets:

<p align="center">
  <img src="../assets/GoFsCriacionais/Singleton.drawio.svg" alt="Diagrama do padrão Singleton">
</p>

<font size="2"><p style="text-align: center">Figura 1: Diagrama de Classes do padrão Singleton aplicado ao AssetProvider.</p></font>

<font size="2"><p style="text-align: center">Fonte: Equipe do Projeto, 2025.</p></font>

O diagrama UML ilustra como a classe `AssetProvider` implementa o padrão Singleton, centralizando o gerenciamento de todos os assets do jogo (imagens, fontes, sprites) e garantindo que esses recursos sejam carregados apenas uma vez durante a execução do programa. A classe utiliza métodos estáticos (`@classmethod`) para controlar o acesso aos recursos e prevenir múltiplas instanciações através do método `__init__` que lança uma exceção.

### 3.1.4.2. Implementação

<details>
  <summary><strong>Código de Implementação do Padrão Singleton</strong></summary>

```python
import pygame
import os
from Template.UIConfigs import *

class AssetProvider:
"""
Singleton para gerenciamento centralizado de assets do jogo.
"""
ASSETS = {}
\_loaded = False

    def __init__(self):
        """Impede instanciação - AssetProvider deve ser usado apenas como classe estática."""
        raise TypeError(
            "AssetProvider não deve ser instanciado. "
            "Use AssetProvider.carregar_assets() e AssetProvider.get(key) diretamente."
        )

    @classmethod
    def carregar_assets(cls):
        """Carrega e escala todos os assets do jogo."""
        if cls._loaded:
            print("[AssetProvider] Assets já carregados anteriormente, pulando recarregamento.")
            return

        base_dir = os.path.dirname(os.path.abspath(__file__))
        try:
            # FONTE
            cls.ASSETS['font_press_start_2P'] = pygame.font.Font(os.path.join(base_dir, 'font', 'PressStart2P-Regular.ttf'), 24)

            # MAP TILES
            cls.ASSETS['grass_claro'] = pygame.transform.scale(
                pygame.image.load(os.path.join(base_dir, 'maps', 'map1', 'titleset', 'grass1.png')).convert_alpha(),
                (TAMANHO_QUADRADO, TAMANHO_QUADRADO)
            )
            cls.ASSETS['grass_escuro'] = pygame.transform.scale(
                pygame.image.load(os.path.join(base_dir, 'maps', 'map1', 'titleset', 'grass2.png')).convert_alpha(),
                (TAMANHO_QUADRADO, TAMANHO_QUADRADO)
            )

            #SCOREBOARD
            cls.ASSETS['scoreboard'] = pygame.transform.scale(
                pygame.image.load(os.path.join(base_dir, 'maps', 'map1', 'object', 'map_scoreboard1.png')).convert_alpha(),
                (TAMANHO_QUADRADO*5, TAMANHO_QUADRADO*1.5)
            )

            cls.ASSETS['scoreboard_slot'] = pygame.transform.scale(
                pygame.image.load(os.path.join(base_dir, 'maps', 'map1', 'object', 'player_block01.png')).convert_alpha(),
                (TAMANHO_QUADRADO/1.8, TAMANHO_QUADRADO/1.6)
            )

            # CAIPORA
            cls.ASSETS['caipora_attack'] = [
                pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'characters', 'defense', 'caipora', f'caipora_attack{i}.png')).convert_alpha(),
                    (TAMANHO_CAIPORA, TAMANHO_CAIPORA)
                )
                for i in range(1, 3)
            ]

            cls.ASSETS['caipora_projectile'] = pygame.transform.scale(
                pygame.image.load(os.path.join(base_dir, 'characters', 'defense', 'caipora', 'caipora_arrow.png')).convert_alpha(),
                (50, 20)
            )

            # BICHO PAPÃO
            bp_walk = [
                pygame.image.load(os.path.join(base_dir, 'characters', 'enemies', 'bicho-papao', f'bp_walk{i}.png')).convert_alpha()
                for i in range(1, 5)
            ]
            cls.ASSETS['bp_walk'] = [
                pygame.transform.scale(pygame.transform.flip(img, True, False), (TAMANHO_BP, TAMANHO_BP))
                for img in bp_walk
            ]

            bp_attack = [
                pygame.image.load(os.path.join(base_dir, 'characters', 'enemies', 'bicho-papao', f'bp_attack{i}.png')).convert_alpha()
                for i in range(1, 3)
            ]
            cls.ASSETS['bp_attack'] = [
                pygame.transform.scale(pygame.transform.flip(img, True, False), (TAMANHO_BP, TAMANHO_BP))
                for img in bp_attack
            ]

            # GUARANÁ (moeda) - carregar com o mesmo padrão dos outros assets
            cls.ASSETS['guarana_coin'] = pygame.transform.scale(
                pygame.image.load(os.path.join(base_dir, 'maps', 'map1', 'object', 'guarana_coin.png')).convert_alpha(),
                (40, 40)
            )

            # MENU PAUSA
            cls.ASSETS.update({
                # Fundo do menu pausa
                'menu_pausa': pygame.image.load(
                    os.path.join(base_dir, 'menu_pause', 'menu_pausa.png')
                ).convert_alpha(),

                # Botão MÚSICA
                'btn_musica': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'botao_musica.png')).convert_alpha(),
                    (200, 60)  # Largura, altura
                ),
                'btn_musica_hover': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'botao_musica_click.png')).convert_alpha(),
                    (200, 60)
                ),

                # Botão EFEITO SONORO
                'btn_efeito': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'botao_efeitoSonoro.png')).convert_alpha(),
                    (200, 60)
                ),
                'btn_efeito_hover': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'botao_efeitoSonoro_click.png')).convert_alpha(),
                    (200, 60)
                ),

                # Botão TUTORIAL
                'btn_tutorial': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'botao_tutorial.png')).convert_alpha(),
                    (200, 60)
                ),
                'btn_tutorial_hover': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'botao_tutorial_click.png')).convert_alpha(),
                    (200, 60)
                ),

                # Botão Sair da Partida
                'btn_sair': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'botao_sair_partida.png')).convert_alpha(),
                    (200, 60)
                ),
                'btn_sair_hover': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'botao_sair_partida_click.png')).convert_alpha(),
                    (200, 60)
                ),

                # Icone Som Normal
                'icon_som': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'icone_som_normal.png')).convert_alpha(),
                    (40, 40)
                ),
                'icon_som_hover': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'icone_som_click.png')).convert_alpha(),
                    (40, 40)
                ),

                # Icone Som Mudo
                'icon_mute': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'icone_som_mute.png')).convert_alpha(),
                    (40, 40)
                ),

                # Barra de volume
                'barra_volume_mute': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'barra_0.png')).convert_alpha(),
                    (150, 20)
                ),
                'barra_volume_mute_houver': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'barra_0_click.png')).convert_alpha(),
                    (150, 20)
                ),
                'barra_volume_25': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'barra_25.png')).convert_alpha(),
                    (150, 20)
                ),
                'barra_volume_25_houver': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'barra_25_click.png')).convert_alpha(),
                    (150, 20)
                ),
                'barra_volume_50': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'barra_50.png')).convert_alpha(),
                    (150, 20)
                ),
                'barra_volume_50_houver': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'barra_50_click.png')).convert_alpha(),
                    (150, 20)
                ),
                'barra_volume_75': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'barra_75.png')).convert_alpha(),
                    (150, 20)
                ),
                'barra_volume_75_houver': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'barra_75_click.png')).convert_alpha(),
                    (150, 20)
                ),
                'barra_volume_100': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'barra_100.png')).convert_alpha(),
                    (150, 20)
                ),
                'barra_volume_100_houver': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_pause', 'barra_100_click.png')).convert_alpha(),
                    (150, 20)
                ),

                # MENU CONFIGURAÇÕES
                'menu_config': pygame.image.load(
                    os.path.join(base_dir, 'menu_config', 'menu_config.png')
                ).convert_alpha(),
                'btn_voltar': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_config', 'botao_voltar.png')).convert_alpha(),
                    (200, 60)
                ),
                'btn_voltar_hover': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_config', 'botao_voltar_click.png')).convert_alpha(),
                    (200, 60)
                ),
                'btn_salvar': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_config', 'botao_salvar.png')).convert_alpha(),
                    (200, 60)
                ),
                'btn_salvar_hover': pygame.transform.scale(
                    pygame.image.load(os.path.join(base_dir, 'menu_config', 'botao_salvar_click.png')).convert_alpha(),
                    (200, 60)
                ),

                # MENU PRINCIPAL
                'menu_principal': pygame.image.load(
                    os.path.join(base_dir, 'menu', 'menu_screen', 'main_screen.png')
                ).convert_alpha(),

                # Botões do Menu Principal
                'menu_btn_jogar': pygame.image.load(
                    os.path.join(base_dir, 'menu', 'menu_screen', 'main_screen_button3.png')
                ).convert_alpha(),
                'menu_btn_jogar_hover': pygame.image.load(
                    os.path.join(base_dir, 'menu', 'menu_screen', 'main_screen_button_click1.png')
                ).convert_alpha(),

                'menu_btn_loja': pygame.image.load(
                    os.path.join(base_dir, 'menu', 'menu_screen', 'main_screen_button2.png')
                ).convert_alpha(),
                'menu_btn_loja_hover': pygame.image.load(
                    os.path.join(base_dir, 'menu', 'menu_screen', 'main_screen_button_click2.png')
                ).convert_alpha(),

                'menu_btn_creditos': pygame.image.load(
                    os.path.join(base_dir, 'menu', 'menu_screen', 'main_screen_button1.png')
                ).convert_alpha(),
                'menu_btn_creditos_hover': pygame.image.load(
                    os.path.join(base_dir, 'menu', 'menu_screen', 'main_screen_button_click3.png')
                ).convert_alpha(),

                'menu_btn_config': pygame.image.load(
                    os.path.join(base_dir, 'menu', 'menu_screen', 'botao_config.png')
                ).convert_alpha(),
                'menu_btn_config_hover': pygame.image.load(
                    os.path.join(base_dir, 'menu', 'menu_screen', 'botao_config_click.png')
                ).convert_alpha(),
                })

            cls._loaded = True
            print("[AssetProvider] Assets carregados com sucesso.")

        except pygame.error as e:
            print(f"[AssetProvider] ERRO CRÍTICO ao carregar assets: {e}")
            pygame.quit()
            exit()

    @classmethod
    def is_loaded(cls) -> bool:
        """Verifica se os assets já foram carregados."""
        return cls._loaded

    @classmethod
    def reload(cls):
        """Força recarregamento de todos os assets (use com cautela)."""
        cls._loaded = False
        cls.ASSETS.clear()
        cls.carregar_assets()

    @classmethod
    def get(cls, key):
        """Método helper para acessar um asset."""
        return cls.ASSETS.get(key)
```

</details>

### 3.1.4.3. Opiniões dos Participantes

<details>
  <summary><strong><a href="https://github.com/caioduart3">Caio Duarte</a></strong></summary>
  <p>Achei um padrão simples, útil para muitos projetos e contextos e fácil de implementar. Acredito que ele se encaixou perfeitamente com o nosso contexto de assets.</p>
</details>

<details>
  <summary><strong><a href="https://github.com/felixlaryssa">Laryssa Félix</a></strong></summary>
  <p>  Percebi que o padrão Singleton é muito útil em situações em que precisamos garantir que apenas uma instância de uma classe exista em todo o sistema, como no caso de gerenciamento de configurações, logs ou assets de um jogo. Ele traz praticidade e evita desperdício de recursos, já que centraliza o acesso a um único objeto. Porém, considero importante usá-lo com cuidado se for aplicado de forma excessiva, pode acabar dificultando testes e aumentar o acoplamento do código. Por isso, acredito que o Singleton deve ser usado apenas quando realmente faz sentido garantir uma única instância, como no caso de provedores de recursos ou conexões globais.</p>
</details>

<details>
  <summary><strong><a href="https://github.com/rafaelSchadt">Rafael Welz Schadt</a></strong></summary>
  <p>Achei o Singleton simples, porém muito útil. É aplicável a quase todo o contexto do projeto, e ajuda muito em projetos de pequeno porte.</p>
</details>

<details>
  <summary><strong><a href="https://github.com/VictorPontual">Victor Pontual Guedes Nobrega</a></strong></summary>
  <p>Gostei do padrão Singleton porque separa a lógica de criação da lógica de uso, deixando o código mais limpo e organizado. No contexto do jogo, ele foi essencial para garantir que os assets sejam carregados uma única vez e compartilhados por todo o sistema, evitando duplicação de memória e facilitando o acesso global aos recursos de forma segura e intuitiva através dos métodos de classe.</p>
</details>

## 3.1.5. Referências Bibliográficas

> <a id="REF1">1.</a> GAMMA, Erich et al. **Padrões de Projeto: Soluções Reutilizáveis de Software Orientado a Objetos**. Tradução de C. F. Lucena e F. S. C. da Silva. Porto Alegre: Bookman, 2007. (Título original: _Design Patterns: Elements of Reusable Object-Oriented Software_).

## 3.1.6. Histórico de Versões 📅

| Versão |    Data    |                Descrição                |                  Autor(es)                   |                    Revisor(es)                     |
| :----: | :--------: | :-------------------------------------: | :------------------------------------------: | :------------------------------------------------: |
| `0.1`  | 23/10/2025 | Adicionando Documentação GoF Criacional | [Caio Duarte](https://github.com/caioduart3) | [Victor Pontual](https://github.com/VictorPontual) |
| `0.2`  | 23/10/2025 | Correção de numeração, formatação do código, adição de vídeo e melhorias na documentação | [Victor Pontual](https://github.com/VictorPontual) | - |
